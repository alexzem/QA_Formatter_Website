function init(){setGlobalVariables(),addEventListeners()}function setGlobalVariables(){qaInput=document.getElementById("qaInput"),qaOutput=document.getElementById("qaOutput"),defaultOutput=qaOutput.innerHTML}function addEventListeners(){var e=document.getElementById("clearButton"),t=document.getElementById("selectButton");e.addEventListener("click",resetQAInputText),t.addEventListener("click",selectOutputText),qaInput.addEventListener("keyup",updateOutput),qaInput.addEventListener("blur",updateOutput),qaInput.addEventListener("paste",function(){setTimeout(updateOutput,100)})}function resetQAInputText(e){setInput(""),setOutput(defaultOutput)}function checkForNewInput(){lastInput!=getInput()&&(lastInput=getInput(),updateOutput())}function getInput(){return qaInput.value}function setInput(e){qaInput.value=e}function getOutput(){var e=unescape(qaOutput.innerHTML);return e}function setOutput(e){qaOutput.innerHTML=e}function isInt(e){var t=/^\d+$/;return t.test(e)?!0:!1}function updateOutput(){if(isStringBlank(getInput()))qaOutput.innerHTML=defaultOutput;else{var e=new AdFeedbackCollection(getInput());printOutput(e)}}function isStringBlank(e){var t=/^\s+$/;return t.test(e)||0===e.length||""===e}function printOutput(e){var t=e.qaResults,n="";t.length>0&&(n="<p><span class=siteSpecification>Site Specification</span><br/>",n+="<span class=functionality>Functionality</span><br/>",n+="<span class=tracking>Tracking</span></p>");for(var s=0;s<t.length;s++){n+="<br/><p class='bold'>";for(var a=0;a<t[s].ads.length;a++)n+=t[s].ads[a].id?t[s].ads[a].id+" - ":"",n+=t[s].ads[a].title,n+=t[s].ads[a].format?" ("+t[s].ads[a].format+")":"",n+="</p>";if(n+="<ul>",t[s].issues.length>0)for(var i=0;i<t[s].issues.length;i++){var r=t[s].issues[i],o=getCategoryClass(r.category);if(n+="<li class=",n+=o,n+=">",r.problems_issues.length>1){n+=r.problems_issues;var u=0===o.length;u&&r.ad_element.length>1&&(n+=" ("+r.ad_element+") ")}r.additionalNotes&&r.additionalNotes.length>1&&(r.additionalNotes.length<=10?n+=" ("+r.additionalNotes+")":(r.problems_issues.length>1&&(n+=". "),n+=r.additionalNotes)),r.potentialReasons.length>1&&(n+="<br/>",n+=r.potentialReasons),n+="</li>"}else n+='<li>See "All Ads"</li>';n+="</ul>"}n=n.replace(/[\u201C\u201D\u201E\u201F\u2033\u2036]/g,'"'),qaOutput.innerHTML=n}function getCategoryClass(e){switch(e){case"Site Specification":return"siteSpecification";case"Functionality":return"functionality";case"Tracking":return"tracking";default:return""}}function selectText(e){var t,n;document.body.createTextRange?(t=document.body.createTextRange(),t.moveToElementText(e),t.select()):window.getSelection&&(n=window.getSelection(),t=document.createRange(),t.selectNodeContents(e),n.removeAllRanges(),n.addRange(t))}function ascendingNumericalSort(e,t){return Number(e)-Number(t)}function selectOutputText(){selectText(qaOutput)}function AdFeedbackCollection(e){this.qaResults=[],this.parseFeedback(e),this.isolateCommonIssues(),this.combineLikeIssues()}function AdFeedback(e){this.ads=e.ads,this.issues=e.issues}function Ad(e){this.id=e.id,this.title=e.title,this.format=e.format}function Issue(e){this.category=e.category,e.ad_element?this.ad_element=e.ad_element:this.ad_element="",e.problems_issues?this.problems_issues=e.problems_issues.replace(/^Other/,""):this.problems_issues="",e.potentialReasons?(this.potentialReasons=e.potentialReasons.replace(/(^")|(\"(?=\"))|("$)/g,""),this.potentialReasons=this.potentialReasons.replace(/\n(?=\*)/g,"<br/>"),this.potentialReasons=this.potentialReasons.replace(/\.\n/g,".<br/>"),this.potentialReasons=this.potentialReasons.replace(/\:\n/g,":<br/>"),this.potentialReasons=this.potentialReasons.replace(/;(\s?)\n/g,";<br/>")):this.potentialReasons="",e.additionalNotes?this.additionalNotes=e.additionalNotes.replace(/\s$/,""):this.additionalNotes=""}!window.addEventListener&&Element.prototype&&function(e){function t(){}function n(e,n,s){s=!!s;var a=this;a.__eventListener=a.__eventListener||{},a.__eventListener[e]=a.__eventListener[e]||[[],[]],a.__eventListener[e][0].length||a.__eventListener[e][1].length||(a.__eventListener["on"+e]=function(n){var s,i=new t,r=[],o=n.srcElement||a;for(s in n)i[s]=n[s];for(i.currentTarget=a,i.pageX=n.clientX+document.documentElement.scrollLeft,i.pageY=n.clientY+document.documentElement.scrollTop,i.target=o,i.timeStamp=+new Date,i.nativeEvent=n;o;)r.unshift(o),o=o.parentNode;for(var u,l=0;u=r[l];++l)if(u.__eventListener&&u.__eventListener[e])for(var c,d=0;c=u.__eventListener[e][0][d];++d)c.call(a,i);r.reverse();for(var u,l=0;(u=r[l])&&!n.cancelBubble;++l)if(u.__eventListener&&u.__eventListener[e])for(var c,d=0;(c=u.__eventListener[e][1][d])&&!n.cancelBubble;++d)c.call(a,i);n.cancelBubble=!0},a.attachEvent("on"+e,a.__eventListener["on"+e])),a.__eventListener[e][s?0:1].push(n)}function s(e,t,n){n=!!n;var s,a=this;for(a.__eventListener=a.__eventListener||{},a.__eventListener[e]=a.__eventListener[e]||[[],[]],s=a.__eventListener[e][n?0:1],eventIndex=s.length-1,eventLength=-1;eventIndex>eventLength;--eventIndex)s[eventIndex]==t&&s.splice(eventIndex,1)[0][1];a.__eventListener[e][0].length||a.__eventListener[e][1].length||a.detachEvent("on"+e,a.__eventListener["on"+e])}t.prototype.preventDefault=function(){this.nativeEvent.returnValue=!1},t.prototype.stopPropagation=function(){this.nativeEvent.cancelBubble=!0},window.constructor.prototype.addEventListener=document.constructor.prototype.addEventListener=Element.prototype.addEventListener=n,window.constructor.prototype.removeEventListener=document.constructor.prototype.removeEventListener=Element.prototype.removeEventListener=s}();var qaInput,qaOutput,defaultOutput,lastInput="",checkForInputIntervalID;window.addEventListener("load",init),function(e,t,n,s,a,i,r){e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,i=t.createElement(n),r=t.getElementsByTagName(n)[0],i.async=1,i.src=s,r.parentNode.insertBefore(i,r)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-3719327-2","mediamind.com"),ga("send","pageview"),window.Modernizr=function(e,t,n){function s(e){h.cssText=e}function a(e,t){return typeof e===t}var i,r,o,u="2.7.1",l={},c=t.documentElement,d="modernizr",p=t.createElement(d),h=p.style,f=({}.toString,{}),m=[],v=m.slice,g={}.hasOwnProperty;o=a(g,"undefined")||a(g.call,"undefined")?function(e,t){return t in e&&a(e.constructor.prototype[t],"undefined")}:function(e,t){return g.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=v.call(arguments,1),s=function(){if(this instanceof s){var a=function(){};a.prototype=t.prototype;var i=new a,r=t.apply(i,n.concat(v.call(arguments)));return Object(r)===r?r:i}return t.apply(e,n.concat(v.call(arguments)))};return s}),f.localstorage=function(){try{return localStorage.setItem(d,d),localStorage.removeItem(d),!0}catch(e){return!1}};for(var y in f)o(f,y)&&(r=y.toLowerCase(),l[r]=f[y](),m.push((l[r]?"":"no-")+r));return l.addTest=function(e,t){if("object"==typeof e)for(var s in e)o(e,s)&&l.addTest(s,e[s]);else{if(e=e.toLowerCase(),l[e]!==n)return l;t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses&&(c.className+=" "+(t?"":"no-")+e),l[e]=t}return l},s(""),p=i=null,function(e,t){function n(e,t){var n=e.createElement("p"),s=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",s.insertBefore(n.lastChild,s.firstChild)}function s(){var e=y.elements;return"string"==typeof e?e.split(" "):e}function a(e){var t=g[e[m]];return t||(t={},v++,e[m]=v,g[v]=t),t}function i(e,n,s){if(n||(n=t),c)return n.createElement(e);s||(s=a(n));var i;return i=s.cache[e]?s.cache[e].cloneNode():f.test(e)?(s.cache[e]=s.createElem(e)).cloneNode():s.createElem(e),!i.canHaveChildren||h.test(e)||i.tagUrn?i:s.frag.appendChild(i)}function r(e,n){if(e||(e=t),c)return e.createDocumentFragment();n=n||a(e);for(var i=n.frag.cloneNode(),r=0,o=s(),u=o.length;u>r;r++)i.createElement(o[r]);return i}function o(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return y.shivMethods?i(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+s().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function u(e){e||(e=t);var s=a(e);return y.shivCSS&&!l&&!s.hasCSS&&(s.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),c||o(e,s),e}var l,c,d="3.7.0",p=e.html5||{},h=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m="_html5shiv",v=0,g={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",l="hidden"in e,c=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){l=!0,c=!0}}();var y={elements:p.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:d,shivCSS:p.shivCSS!==!1,supportsUnknownElements:c,shivMethods:p.shivMethods!==!1,type:"default",shivDocument:u,createElement:i,createDocumentFragment:r};e.html5=y,u(t)}(this,t),l._version=u,l}(this,this.document),AdFeedbackCollection.prototype.parseRawText=function(e){var t,n=/(?:\t)|(?:\n(?=[1-9]\d{6,}))/g,s=e.split(n),a=[],i=[];for(t=0;t<s.length;t++)t>0&&t%8===0&&(a.push(i),i=[]),i.push(s[t]);return a.push(i),a},AdFeedbackCollection.prototype.parseFeedback=function(e){for(var t=0,n=1,s=2,a=3,i=4,r=5,o=6,u=7,l=this.parseRawText(e),c=0;c<l.length;c++){var d=new Issue({category:l[c][a],problems_issues:l[c][r],ad_element:l[c][i],potentialReasons:l[c][o],additionalNotes:l[c][u]});if(0===c||l[c][t]!=l[c-1][t]){var p=new Ad({id:l[c][t],title:l[c][n],format:l[c][s]});this.qaResults.push(new AdFeedback({ads:[p],issues:[d]}))}else this.qaResults[this.qaResults.length-1].insertIssue(d)}},AdFeedbackCollection.prototype.isolateCommonIssues=function(){var e=[];if(this.qaResults.length>1){for(var t=0;t<this.qaResults[0].issues.length;t++){for(var n=this.qaResults[0].issues[t],s=!0,a=0;a<this.qaResults.length;a++)this.qaResults[a].hasIssue(n)||(s=!1);s&&e.push(n)}for(var i=0;i<e.length;i++)for(var r=0;r<this.qaResults.length;r++)this.qaResults[r].removeIssue(e[i]);if(e.length>0){var o=new Ad({id:"",title:"All Ads",format:""}),u=new AdFeedback({ads:[o],issues:e});this.qaResults.unshift(u)}}},AdFeedbackCollection.prototype.combineLikeIssues=function(){for(var e=0;e<this.qaResults.length;e++)for(var t=e+1;t<this.qaResults.length;t++)this.qaResults[e].hasSameIssuesAs(this.qaResults[t])&&(this.qaResults[e].insertAd(this.qaResults[t].ads[0]),this.qaResults.splice(t,1),t--)},AdFeedback.prototype.insertAd=function(e){this.hasAd(e)||this.ads.push(e)},AdFeedback.prototype.getAdIndex=function(e){for(var t=0;t<this.ads.length;t++)if(this.ads[t].isEqualTo(e))return t;return-1},AdFeedback.prototype.hasAd=function(e){return this.getAdIndex(e)>=0?!0:!1},AdFeedback.prototype.insertIssue=function(e){this.hasIssue(e)||this.issues.push(e)},AdFeedback.prototype.getIssueIndex=function(e){for(var t=0;t<this.issues.length;t++)if(this.issues[t].isEqualTo(e))return t;return-1},AdFeedback.prototype.hasIssue=function(e){return this.getIssueIndex(e)>=0?!0:!1},AdFeedback.prototype.removeIssue=function(e){return this.hasIssue(e)?this.issues.splice(this.getIssueIndex(e),1):void 0},AdFeedback.prototype.insertIssue=function(e){this.hasIssue(e)||this.issues.push(e)},AdFeedback.prototype.hasSameIssuesAs=function(e){if(this.issues.length!=e.issues.length)return!1;for(var t=0;t<this.issues.length;t++)if(!e.hasIssue(this.issues[t]))return!1;return!0},Ad.prototype.isEqualTo=function(e){return this.id==e.id&&this.title==e.title&&this.format==e.format},Issue.prototype.isEqualTo=function(e){return this.category==e.category&&this.ad_element==e.ad_element&&this.problems_issues==e.problems_issues&&this.potentialReasons==e.potentialReasons&&this.additionalNotes==e.additionalNotes};