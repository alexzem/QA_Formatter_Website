function init(){setGlobalVariables(),addEventListeners()}function setGlobalVariables(){qaInput=document.getElementById("qaInput"),qaOutput=document.getElementById("qaOutput"),defaultOutput=qaOutput.innerHTML}function addEventListeners(){var e=document.getElementById("clearButton"),t=document.getElementById("selectButton");e.addEventListener("click",resetQAInputText),t.addEventListener("click",selectOutputText),qaInput.addEventListener("keyup",updateOutput),qaInput.addEventListener("blur",updateOutput),qaInput.addEventListener("paste",function(){setTimeout(updateOutput,100)})}function resetQAInputText(e){setInput(""),setOutput(defaultOutput)}function checkForNewInput(){lastInput!==getInput()&&(lastInput=getInput(),updateOutput())}function getInput(){return qaInput.value}function setInput(e){qaInput.value=e}function getOutput(){var e=unescape(qaOutput.innerHTML);return e}function setOutput(e){qaOutput.innerHTML=e}function isInt(e){var t=/^\d+$/;return t.test(e)?!0:!1}function updateOutput(){if(isStringBlank(getInput()))qaOutput.innerHTML=defaultOutput;else{var e=new AdFeedbackCollection(getInput());printOutput(e)}}function isStringBlank(e){var t=/^\s+$/;return t.test(e)||0===e.length||""===e}function printOutput(e){var t=e.qaResults,s="";t.length>0&&(s="<p><span class=siteSpecification>Site Specification</span><br/>",s+="<span class=functionality>Functionality</span><br/>",s+="<span class=tracking>Tracking</span></p><br/>"),s+=t.map(getAdFeedback).join("<br/>"),s=s.replace(/[\u201C\u201D\u201E\u201F\u2033\u2036]/g,'"'),qaOutput.innerHTML=s}function getAdFeedback(e){var t=e.ads.map(getAdTitles).join("");return t+="<ul>",t+=e.issues.length>0?e.issues.map(getIssues,"").join(""):'<li>See "All Ads"</li>',t+="</ul>"}function getAdTitles(e){var t="<p class='bold'>";if(t+=e.id?e.id+" - ":"",t+=e.title,t+=e.format?" ("+e.format+")":"",t+="</p>",e.testPages&&e.testPages.length>0){t+="<p>Test page(s): ";var s=e.testPages.map(function(e){return"<a href='"+e+"' target='_blank'>"+e+"</a>"});t+=s.join(", "),t+="</p>"}return t}function getIssues(e){var t=getCategoryClass(e.category),s="<li class=";if(s+=t,s+=">",e.problemsIssues.length>1){s+=e.problemsIssues;var n=0===t.length;n&&e.adElements.length>0&&(s+=" ["+e.adElements.join(", ")+"]")}return e.additionalNotes&&e.additionalNotes.length>1&&(e.additionalNotes.length<=10?s+=" ("+e.additionalNotes+")":(e.problemsIssues.length>1&&(s+=" - "),s+=e.additionalNotes)),e.testPages&&e.testPages.length>0&&(s+="<br/>",s+="Test page(s): "+e.testPages.join(" | ")),s+="</li>"}function getCategoryClass(e){switch(e){case"Site Specification":return"siteSpecification";case"Functionality":return"functionality";case"Tracking":return"tracking";default:return""}}function selectText(e){var t,s;document.body.createTextRange?(t=document.body.createTextRange(),t.moveToElementText(e),t.select()):window.getSelection&&(s=window.getSelection(),t=document.createRange(),t.selectNodeContents(e),s.removeAllRanges(),s.addRange(t))}function ascendingNumericalSort(e,t){return Number(e)-Number(t)}function selectOutputText(){selectText(qaOutput)}function init(){setGlobalVariables(),addEventListeners()}function setGlobalVariables(){qaInput=document.getElementById("qaInput"),qaOutput=document.getElementById("qaOutput"),defaultOutput=qaOutput.innerHTML}function addEventListeners(){var e=document.getElementById("clearButton"),t=document.getElementById("selectButton");e.addEventListener("click",resetQAInputText),t.addEventListener("click",selectOutputText),qaInput.addEventListener("keyup",updateOutput),qaInput.addEventListener("blur",updateOutput),qaInput.addEventListener("paste",function(){setTimeout(updateOutput,100)})}function resetQAInputText(e){setInput(""),setOutput(defaultOutput)}function checkForNewInput(){lastInput!==getInput()&&(lastInput=getInput(),updateOutput())}function getInput(){return qaInput.value}function setInput(e){qaInput.value=e}function getOutput(){var e=unescape(qaOutput.innerHTML);return e}function setOutput(e){qaOutput.innerHTML=e}function isInt(e){var t=/^\d+$/;return t.test(e)?!0:!1}function updateOutput(){if(isStringBlank(getInput()))qaOutput.innerHTML=defaultOutput;else{var e=new AdFeedbackCollection(getInput());printOutput(e)}}function isStringBlank(e){var t=/^\s+$/;return t.test(e)||0===e.length||""===e}function printOutput(e){var t=e.qaResults,s="";t.length>0&&(s="<p><span class=siteSpecification>Site Specification</span><br/>",s+="<span class=functionality>Functionality</span><br/>",s+="<span class=tracking>Tracking</span></p><br/>"),s+=t.map(getAdFeedback).join("<br/>"),s=s.replace(/[\u201C\u201D\u201E\u201F\u2033\u2036]/g,'"'),qaOutput.innerHTML=s}function getAdFeedback(e){var t=e.ads.map(getAdTitles).join("");return t+="<ul>",t+=e.issues.length>0?e.issues.map(getIssues,"").join(""):'<li>See "All Ads"</li>',t+="</ul>"}function getAdTitles(e){var t="<p class='bold'>";if(t+=e.id?e.id+" - ":"",t+=e.title,t+=e.format?" ("+e.format+")":"",t+="</p>",e.testPages&&e.testPages.length>0){t+="<p>Test page(s): ";var s=e.testPages.map(function(e){return"<a href='"+e+"' target='_blank'>"+e+"</a>"});t+=s.join(", "),t+="</p>"}return t}function getIssues(e){var t=getCategoryClass(e.category),s="<li class=";if(s+=t,s+=">",e.problemsIssues.length>1){s+=e.problemsIssues;var n=0===t.length;n&&e.adElements.length>0&&(s+=" ["+e.adElements.join(", ")+"]")}return e.additionalNotes&&e.additionalNotes.length>1&&(e.additionalNotes.length<=10?s+=" ("+e.additionalNotes+")":(e.problemsIssues.length>1&&(s+=" - "),s+=e.additionalNotes)),e.testPages&&e.testPages.length>0&&(s+="<br/>",s+="Test page(s): "+e.testPages.join(" | ")),s+="</li>"}function getCategoryClass(e){switch(e){case"Site Specification":return"siteSpecification";case"Functionality":return"functionality";case"Tracking":return"tracking";default:return""}}function selectText(e){var t,s;document.body.createTextRange?(t=document.body.createTextRange(),t.moveToElementText(e),t.select()):window.getSelection&&(s=window.getSelection(),t=document.createRange(),t.selectNodeContents(e),s.removeAllRanges(),s.addRange(t))}function ascendingNumericalSort(e,t){return Number(e)-Number(t)}function selectOutputText(){selectText(qaOutput)}function AdFeedbackCollection(e){this.qaResults=[],this.parseFeedback(e),this.isolateCommonTestPages(),this.isolateCommonIssues(),this.combineLikeIssues()}function AdFeedback(e){this.ads=e.ads,this.issues=e.issues}function Ad(e){this.id=e.id,this.title=e.title,this.format=e.format}function Issue(e){this.category=e.category,e.adElement&&(this.adElements=[e.adElement]),e.problemsIssues&&(this.problemsIssues=e.problemsIssues.replace(/^Other/,"")),e.testPage&&(this.testPages=[e.testPage]),e.additionalNotes&&(this.additionalNotes=e.additionalNotes.replace(/\s$/,""))}function AdFeedbackCollection(e){this.qaResults=[],this.parseFeedback(e),this.isolateCommonTestPages(),this.isolateCommonIssues(),this.combineLikeIssues()}function AdFeedback(e){this.ads=e.ads,this.issues=e.issues}function Ad(e){this.id=e.id,this.title=e.title,this.format=e.format}function Issue(e){this.category=e.category,e.adElement&&(this.adElements=[e.adElement]),e.problemsIssues&&(this.problemsIssues=e.problemsIssues.replace(/^Other/,"")),e.testPage&&(this.testPages=[e.testPage]),e.additionalNotes&&(this.additionalNotes=e.additionalNotes.replace(/\s$/,""))}!window.addEventListener&&Element.prototype&&function(e){function t(){}function s(e,s,n){n=!!n;var i=this;i.__eventListener=i.__eventListener||{},i.__eventListener[e]=i.__eventListener[e]||[[],[]],i.__eventListener[e][0].length||i.__eventListener[e][1].length||(i.__eventListener["on"+e]=function(s){var n,a=new t,u=[],r=s.srcElement||i;for(n in s)a[n]=s[n];for(a.currentTarget=i,a.pageX=s.clientX+document.documentElement.scrollLeft,a.pageY=s.clientY+document.documentElement.scrollTop,a.target=r,a.timeStamp=+new Date,a.nativeEvent=s;r;)u.unshift(r),r=r.parentNode;for(var o,l=0;o=u[l];++l)if(o.__eventListener&&o.__eventListener[e])for(var c,d=0;c=o.__eventListener[e][0][d];++d)c.call(i,a);u.reverse();for(var o,l=0;(o=u[l])&&!s.cancelBubble;++l)if(o.__eventListener&&o.__eventListener[e])for(var c,d=0;(c=o.__eventListener[e][1][d])&&!s.cancelBubble;++d)c.call(i,a);s.cancelBubble=!0},i.attachEvent("on"+e,i.__eventListener["on"+e])),i.__eventListener[e][n?0:1].push(s)}function n(e,t,s){s=!!s;var n,i=this;for(i.__eventListener=i.__eventListener||{},i.__eventListener[e]=i.__eventListener[e]||[[],[]],n=i.__eventListener[e][s?0:1],eventIndex=n.length-1,eventLength=-1;eventIndex>eventLength;--eventIndex)n[eventIndex]==t&&n.splice(eventIndex,1)[0][1];i.__eventListener[e][0].length||i.__eventListener[e][1].length||i.detachEvent("on"+e,i.__eventListener["on"+e])}t.prototype.preventDefault=function(){this.nativeEvent.returnValue=!1},t.prototype.stopPropagation=function(){this.nativeEvent.cancelBubble=!0},window.constructor.prototype.addEventListener=document.constructor.prototype.addEventListener=Element.prototype.addEventListener=s,window.constructor.prototype.removeEventListener=document.constructor.prototype.removeEventListener=Element.prototype.removeEventListener=n}();var qaInput,qaOutput,defaultOutput,lastInput="",checkForInputIntervalID;window.addEventListener("load",init);var qaInput,qaOutput,defaultOutput,lastInput="",checkForInputIntervalID;window.addEventListener("load",init),function(e,t,s,n,i,a,u){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(s),u=t.getElementsByTagName(s)[0],a.async=1,a.src=n,u.parentNode.insertBefore(a,u)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-3719327-2","mediamind.com"),ga("send","pageview"),window.Modernizr=function(e,t,s){function n(e){p.cssText=e}function i(e,t){return typeof e===t}var a,u,r,o="2.7.1",l={},c=t.documentElement,d="modernizr",h=t.createElement(d),p=h.style,f=({}.toString,{}),g=[],m=g.slice,v={}.hasOwnProperty;r=i(v,"undefined")||i(v.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(e,t){return v.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var s=m.call(arguments,1),n=function(){if(this instanceof n){var i=function(){};i.prototype=t.prototype;var a=new i,u=t.apply(a,s.concat(m.call(arguments)));return Object(u)===u?u:a}return t.apply(e,s.concat(m.call(arguments)))};return n}),f.localstorage=function(){try{return localStorage.setItem(d,d),localStorage.removeItem(d),!0}catch(e){return!1}};for(var I in f)r(f,I)&&(u=I.toLowerCase(),l[u]=f[I](),g.push((l[u]?"":"no-")+u));return l.addTest=function(e,t){if("object"==typeof e)for(var n in e)r(e,n)&&l.addTest(n,e[n]);else{if(e=e.toLowerCase(),l[e]!==s)return l;t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses&&(c.className+=" "+(t?"":"no-")+e),l[e]=t}return l},n(""),h=a=null,function(e,t){function s(e,t){var s=e.createElement("p"),n=e.getElementsByTagName("head")[0]||e.documentElement;return s.innerHTML="x<style>"+t+"</style>",n.insertBefore(s.lastChild,n.firstChild)}function n(){var e=I.elements;return"string"==typeof e?e.split(" "):e}function i(e){var t=v[e[g]];return t||(t={},m++,e[g]=m,v[m]=t),t}function a(e,s,n){if(s||(s=t),c)return s.createElement(e);n||(n=i(s));var a;return a=n.cache[e]?n.cache[e].cloneNode():f.test(e)?(n.cache[e]=n.createElem(e)).cloneNode():n.createElem(e),!a.canHaveChildren||p.test(e)||a.tagUrn?a:n.frag.appendChild(a)}function u(e,s){if(e||(e=t),c)return e.createDocumentFragment();s=s||i(e);for(var a=s.frag.cloneNode(),u=0,r=n(),o=r.length;o>u;u++)a.createElement(r[u]);return a}function r(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(s){return I.shivMethods?a(s,e,t):t.createElem(s)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(I,t.frag)}function o(e){e||(e=t);var n=i(e);return I.shivCSS&&!l&&!n.hasCSS&&(n.hasCSS=!!s(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),c||r(e,n),e}var l,c,d="3.7.0",h=e.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",m=0,v={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",l="hidden"in e,c=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(s){l=!0,c=!0}}();var I={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:d,shivCSS:h.shivCSS!==!1,supportsUnknownElements:c,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:o,createElement:a,createDocumentFragment:u};e.html5=I,o(t)}(this,t),l._version=o,l}(this,this.document),AdFeedbackCollection.prototype={parseRawText:function(e){var t=/(?:\t)|(?:\n(?=[1-9]\d{6,}))/g,s=e.split(t),n=[],i=[];return s.forEach(function(e,t){t>0&&t%8===0&&(n.push(i),i=[]),i.push(e)}),n.push(i),n},parseFeedback:function(e){var t=0,s=1,n=2,i=3,a=4,u=5,r=6,o=7,l=this.parseRawText(e);l.forEach(function(e,l,c){var d=new Issue({category:e[i],problemsIssues:e[u],adElement:e[a],testPage:e[r],additionalNotes:e[o]});if(0===l||e[t]!=c[l-1][t]){var h=new Ad({id:e[t],title:e[s],format:e[n]});this.qaResults.push(new AdFeedback({ads:[h],issues:[d]}))}else this.qaResults[this.qaResults.length-1].insertIssue(d)},this)},isolateCommonTestPages:function(){this.qaResults.length>1&&this.qaResults.forEach(function(e){var t=e.issues&&e.issues.length>0;if(t){var s=e.issues[0],n=s.testPages&&s.testPages.length>0;if(n){var i=e.issues.every(function(e){return e.testPages.sort().join(",")===s.testPages.sort().join(",")});i&&(e.ads[0].testPages=s.testPages,e.issues.forEach(function(e){e.testPages=null}))}}})},isolateCommonIssues:function(){if(this.qaResults.length>1){var e=this.qaResults[0].issues,t=e.filter(function(e){return this.qaResults.every(function(t){return t.hasSimilarIssue(e)})},this);if(t.forEach(function(e){this.qaResults.forEach(function(t){t.removeSimilarIssue(e)})},this),t.length>0){var s=new Ad({id:"",title:"All Ads",format:""}),n=new AdFeedback({ads:[s],issues:t});this.qaResults.unshift(n)}}},combineLikeIssues:function(){this.qaResults.forEach(function(e,t,s){for(var n=t+1;n<s.length;n++)e.hasSimilarIssuesAs(s[n])&&(e.insertAd(s[n].ads[0]),s.splice(n,1),n--)})}},AdFeedback.prototype={insertAd:function(e){this.hasAd(e)||this.ads.push(e)},getAdIndex:function(e){for(var t=0;t<this.ads.length;t++)if(this.ads[t].isEqualTo(e))return t;return-1},hasAd:function(e){return this.getAdIndex(e)>=0?!0:!1},insertIssue:function(e){this.hasIssue(e)||(this.hasSimilarIssue(e)?this.getSimilarIssue(e).combine(e):this.issues.push(e))},getIssueIndex:function(e){for(var t=0;t<this.issues.length;t++)if(this.issues[t].isEqualTo(e))return t;return-1},hasIssue:function(e){return this.getIssueIndex(e)>=0?!0:!1},getSimilarIssueIndex:function(e){for(var t=0;t<this.issues.length;t++)if(this.issues[t].isSimilarTo(e))return t;return-1},getSimilarIssue:function(e){var t=this.getSimilarIssueIndex(e);return t>=0?this.issues[t]:void 0},hasSimilarIssue:function(e){return this.getSimilarIssueIndex(e)>=0?!0:!1},removeSimilarIssue:function(e){return this.hasSimilarIssue(e)?this.issues.splice(this.getSimilarIssueIndex(e),1):void 0},hasSimilarIssuesAs:function(e){return this.issues.length!==e.issues.length?!1:this.issues.every(function(t){return e.hasSimilarIssue(t)})}},Ad.prototype={isEqualTo:function(e){return this.id===e.id&&this.title===e.title&&this.format===e.format}},Issue.prototype={insertAdElements:function(e){e&&e.length>0&&this.adElements.push(e)},insertTestPages:function(e){e&&e.length>0&&(this.testPages.push(e),this.testPages.forEach(function(e,t,s){s.indexOf(e)>=0&&s.splice(t,1)}))},combine:function(e){this.isSimilarTo(e)&&(this.insertAdElements(e.adElements),this.insertTestPages(e.testPages))},isEqualTo:function(e){return this.adElements===e.adElements&&this.testPage===e.testPage&&this.isSimilarTo(e)},isSimilarTo:function(e){return this.category===e.category&&this.problemsIssues===e.problemsIssues&&this.additionalNotes===e.additionalNotes}},AdFeedbackCollection.prototype={parseRawText:function(e){var t=/(?:\t)|(?:\n(?=[1-9]\d{6,}))/g,s=e.split(t),n=[],i=[];return s.forEach(function(e,t){t>0&&t%8===0&&(n.push(i),i=[]),i.push(e)}),n.push(i),n},parseFeedback:function(e){var t=0,s=1,n=2,i=3,a=4,u=5,r=6,o=7,l=this.parseRawText(e);l.forEach(function(e,l,c){var d=new Issue({category:e[i],problemsIssues:e[u],adElement:e[a],testPage:e[r],additionalNotes:e[o]});if(0===l||e[t]!=c[l-1][t]){var h=new Ad({id:e[t],title:e[s],format:e[n]});this.qaResults.push(new AdFeedback({ads:[h],issues:[d]}))}else this.qaResults[this.qaResults.length-1].insertIssue(d)},this)},isolateCommonTestPages:function(){this.qaResults.length>1&&this.qaResults.forEach(function(e){var t=e.issues&&e.issues.length>0;if(t){var s=e.issues[0],n=s.testPages&&s.testPages.length>0;if(n){var i=e.issues.every(function(e){return e.testPages.sort().join(",")===s.testPages.sort().join(",")});i&&(e.ads[0].testPages=s.testPages,e.issues.forEach(function(e){e.testPages=null}))}}})},isolateCommonIssues:function(){if(this.qaResults.length>1){var e=this.qaResults[0].issues,t=e.filter(function(e){return this.qaResults.every(function(t){return t.hasSimilarIssue(e)})},this);if(t.forEach(function(e){this.qaResults.forEach(function(t){t.removeSimilarIssue(e)})},this),t.length>0){var s=new Ad({id:"",title:"All Ads",format:""}),n=new AdFeedback({ads:[s],issues:t});this.qaResults.unshift(n)}}},combineLikeIssues:function(){this.qaResults.forEach(function(e,t,s){for(var n=t+1;n<s.length;n++)e.hasSimilarIssuesAs(s[n])&&(e.insertAd(s[n].ads[0]),s.splice(n,1),n--)})}},AdFeedback.prototype={insertAd:function(e){this.hasAd(e)||this.ads.push(e)},getAdIndex:function(e){for(var t=0;t<this.ads.length;t++)if(this.ads[t].isEqualTo(e))return t;return-1},hasAd:function(e){return this.getAdIndex(e)>=0?!0:!1},insertIssue:function(e){this.hasIssue(e)||(this.hasSimilarIssue(e)?this.getSimilarIssue(e).combine(e):this.issues.push(e))},getIssueIndex:function(e){for(var t=0;t<this.issues.length;t++)if(this.issues[t].isEqualTo(e))return t;return-1},hasIssue:function(e){return this.getIssueIndex(e)>=0?!0:!1},getSimilarIssueIndex:function(e){for(var t=0;t<this.issues.length;t++)if(this.issues[t].isSimilarTo(e))return t;return-1},getSimilarIssue:function(e){var t=this.getSimilarIssueIndex(e);return t>=0?this.issues[t]:void 0},hasSimilarIssue:function(e){return this.getSimilarIssueIndex(e)>=0?!0:!1},removeSimilarIssue:function(e){return this.hasSimilarIssue(e)?this.issues.splice(this.getSimilarIssueIndex(e),1):void 0},hasSimilarIssuesAs:function(e){return this.issues.length!==e.issues.length?!1:this.issues.every(function(t){return e.hasSimilarIssue(t)})}},Ad.prototype={isEqualTo:function(e){return this.id===e.id&&this.title===e.title&&this.format===e.format}},Issue.prototype={insertAdElements:function(e){e&&e.length>0&&this.adElements.push(e)},insertTestPages:function(e){e&&e.length>0&&(this.testPages.push(e),this.testPages.forEach(function(e,t,s){s.indexOf(e)>=0&&s.splice(t,1)}))},combine:function(e){this.isSimilarTo(e)&&(this.insertAdElements(e.adElements),this.insertTestPages(e.testPages))},isEqualTo:function(e){return this.adElements===e.adElements&&this.testPage===e.testPage&&this.isSimilarTo(e)},isSimilarTo:function(e){return this.category===e.category&&this.problemsIssues===e.problemsIssues&&this.additionalNotes===e.additionalNotes}};